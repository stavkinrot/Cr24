<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>CRX Generator â€“ Chat</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="./styles.css" rel="stylesheet" />
  </head>
  <body class="chat-body">
    <main class="chat-container">
      <header class="appbar">
        <h1>CRX Generator</h1>
        <div class="appbar-actions">
          <button id="themeToggle" type="button" aria-label="Toggle theme">Dark mode</button>
        </div>
      </header>

      <!-- Chat messages -->
      <section id="messages" class="messages" aria-live="polite" aria-relevant="additions"></section>

      <!-- Sticky input bar -->
      <form id="chat-form" class="composer" autocomplete="off">
        <button id="modelButton" class="icon-button" type="button" title="Model & settings" aria-haspopup="true" aria-expanded="false">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
            <path d="M19.14 12.94c.04-.31.06-.63.06-.94s-.02-.63-.06-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.61-.22l-2.39.96a7.08 7.08 0 0 0-1.63-.94l-.36-2.54A.5.5 0 0 0 14.3 2h-4.6a.5.5 0 0 0-.5.42l-.36 2.54c-.6.24-1.16.56-1.68.94l-2.39-.96a.5.5 0 0 0-.61.22L2.64 8.48a.5.5 0 0 0 .12.64l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58a.5.5 0 0 0-.12.64l1.92 3.32c.14.24.43.34.69.22l2.39-.96c.51.39 1.08.71 1.68.94l.36 2.54c.04.27.27.46.54.46h4.6c.27 0 .5-.19.54-.46l.36-2.54c.6-.24 1.16-.56 1.68-.94l2.39.96c.26.12.55.02.69-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58zM12 15.5A3.5 3.5 0 1 1 12 8.5a3.5 3.5 0 0 1 0 7z"/>
          </svg>
        </button>

        <textarea id="chat-input" class="composer-input" rows="1" placeholder="What would you like your extension to do?" required></textarea>

        <button id="send" class="primary" type="submit" title="Send">Send</button>

        <!-- Model popover -->
        <div id="model-popover" class="popover" hidden>
          <label class="stack">
            <span>Model</span>
            <select id="ai-model">
              <option value="auto" selected>Auto / Best</option>
              <option value="gpt-5">gpt-5</option>
              <option value="gpt-4.1">gpt-4.1</option>
              <option value="gpt-4o">gpt-4o</option>
              <option value="gpt-4o-mini">gpt-4o-mini</option>
            </select>
          </label>

          <label class="stack">
            <span>Temperature <span id="ai-temp-val">0.4</span></span>
            <input id="ai-temp" type="range" min="0" max="1" step="0.05" value="0.4" />
          </label>
        </div>
      </form>
    </main>

    <script type="module" src="./popup.ts"></script>
  </body>
</html>
